+++
Categories = ["ネットワーク"]
Description = " VLAN、Trunkそれぞれを一部分的に切り出した説明はよくあるが、 それらが組み合わさった実践的な構成についてあまり書いてないので、例を考えて載せてみる。    (1) L2スイッチに２つのシステムのサーバ（それぞれが冗長構成）がある。"
Tags = ["tech"]
date = "2014-03-09T21:25:00+09:00"
title = "VLAN、Trunkを使った実践的な構成のメモ"
author = "mosuke5"
archive = ["2014"]
draft = false
+++

業務ではオンプレミスでのシステムを運用している。いままでずっとアプリケーション開発をやってきていたのでネットワークについてはあまり知識がないわけだが、いろいろと勉強している最中だ。

そのなかで、VLAN、Trunkについて少し俯瞰した説明が書かれたものが世の中にないなと感じている。それぞれを一部分的に切り出した説明はよくあるが、それらが組み合わさった実践的な構成についてあまり書いてないので、例を考えて載せてみる。実際に、業務レベルで動いているシステムでよく使われている構成なので、役に立つ部分も多いのではないかと思う。
<!--more-->

## 構成のポイント
![vlan-trunk](/image/vlan_trunk.jpg)

L3スイッチ、L2スイッチ、サーバ全てに置いて冗長化されているのがポイント。そして、同じL2スイッチ配下ではあるが、サーバの役割によってVLANによってセグメントは分けているというのが肝だ。

1. L2スイッチに２つのシステムのサーバ（それぞれが冗長構成）がある
1. それぞれのシステムはVLANで切られている
1. L2-L2間、L3-L2間はTrunkを使用(Vlan100,200)
1. L3インターフェースはサブインタフェース利用
1. L3の冗長はHSRPを利用
